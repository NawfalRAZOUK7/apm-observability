<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="observability.tests.test_kpis.KpisEndpointTests-20251224190151" tests="2" file="observability/tests/test_kpis.py" time="0.010" timestamp="2025-12-24T19:01:54" failures="2" errors="0" skipped="0">
	<testcase classname="observability.tests.test_kpis.KpisEndpointTests" name="test_kpis_bad_date_param_returns_400" time="0.006" timestamp="2025-12-24T19:01:54" file="observability/tests/test_kpis.py" line="109">
		<failure type="DatabaseOperationForbidden" message="Database threaded connections to 'writer' are not allowed in this test. Add 'writer' to observability.tests.test_kpis.KpisEndpointTests.databases to ensure proper test isolation and silence this failure."><![CDATA[Traceback (most recent call last):
  File "/Users/nawfalrazouk/apm-observability/observability/tests/test_kpis.py", line 67, in setUp
    ApiRequest.objects.bulk_create(rows)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/models/query.py", line 805, in bulk_create
    with transaction.atomic(using=self.db, savepoint=False):
         ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/transaction.py", line 198, in __enter__
    if not connection.get_autocommit():
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/backends/base/base.py", line 454, in get_autocommit
    self.ensure_connection()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/test/testcases.py", line 309, in patched_ensure_connection
    return _DatabaseFailure(self.ensure_connection, message)()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/test/testcases.py", line 201, in __call__
    raise DatabaseOperationForbidden(self.message)
django.test.testcases.DatabaseOperationForbidden: Database threaded connections to 'writer' are not allowed in this test. Add 'writer' to observability.tests.test_kpis.KpisEndpointTests.databases to ensure proper test isolation and silence this failure.
]]></failure>
	</testcase>
	<testcase classname="observability.tests.test_kpis.KpisEndpointTests" name="test_kpis_shape_and_plausible_values" time="0.004" timestamp="2025-12-24T19:01:54" file="observability/tests/test_kpis.py" line="69">
		<failure type="DatabaseOperationForbidden" message="Database threaded connections to 'writer' are not allowed in this test. Add 'writer' to observability.tests.test_kpis.KpisEndpointTests.databases to ensure proper test isolation and silence this failure."><![CDATA[Traceback (most recent call last):
  File "/Users/nawfalrazouk/apm-observability/observability/tests/test_kpis.py", line 67, in setUp
    ApiRequest.objects.bulk_create(rows)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/models/query.py", line 805, in bulk_create
    with transaction.atomic(using=self.db, savepoint=False):
         ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/transaction.py", line 198, in __enter__
    if not connection.get_autocommit():
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/db/backends/base/base.py", line 454, in get_autocommit
    self.ensure_connection()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/test/testcases.py", line 309, in patched_ensure_connection
    return _DatabaseFailure(self.ensure_connection, message)()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/nawfalrazouk/apm-observability/.venv/lib/python3.14/site-packages/django/test/testcases.py", line 201, in __call__
    raise DatabaseOperationForbidden(self.message)
django.test.testcases.DatabaseOperationForbidden: Database threaded connections to 'writer' are not allowed in this test. Add 'writer' to observability.tests.test_kpis.KpisEndpointTests.databases to ensure proper test isolation and silence this failure.
]]></failure>
	</testcase>
</testsuite>
